{% set view_settings = {} %}

{# Set view settings from plugin config. #}
{% set config = config.get('plugins.view') %}
{% if config.header.view %}
    {% set view_settings = view_settings|merge(config.header.view) %}
{% endif %}

{# Set view settings from page. #}
{% if page.header.view %}
    {% set view_settings = view_settings|merge(page.header.view) %}
{%  endif %}

{# Set view settings from header. #}
{% if header.view %}
    {% set view_settings = view_settings|merge(header.view) %}
{% endif %}

{# Set view #}
{% set items = page.find(header.view.page).collection(header.view.params|default('content'), header.view.pagination) %}

{# Output view #}
{% if items and view_settings.template %}
    {% set view = {'items': items, 'settings': view_settings} %}
    {% include ((view_settings.template ~ '.html.twig')) with {'view': view} %}
{% endif %}