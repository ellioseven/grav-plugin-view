{% set view_settings = {} %}

{# Set view settings from plugin config. #}
{% set config = config.get('plugins.view') %}
{% if config.header.view %}
    {% set view_settings = view_settings|merge(config.header.view) %}
{% endif %}

{# Set view settings from page. #}
{% if page.header.view %}
    {% set view_settings = view_settings|merge(page.header.view) %}
{%  endif %}

{# Set view settings from header. #}
{% if header.view %}
    {% set view_settings = view_settings|merge(header.view) %}
{% endif %}

{# Set view #}
{% set params = header.view.params|default('content') %}
{% set pagination = header.view.pagination|default(false) %}
{% set view = page.find(header.view.page).collection(params, pagination) %}

{# Output view #}
{% if view and view_settings.template %}
    {% include ((view_settings.template ~ '.html.twig')) with {'view': view, 'context': page} %}
{% endif %}